---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "metabase_collection_graph Resource - terraform-provider-metabase"
subcategory: ""
description: |-
  The graph of permissions between permissions groups and collections.
  Metabase exposes a single resource to define all permissions related to collections. This means a single collection graph resource should be defined in the entire Terraform configuration.
  The collection graph cannot be created or deleted. Trying to create it will result in an error. It should be imported instead. Trying to delete the resource will succeed with no impact on Metabase (it is a no-op).
  Permissions for the Administrators group cannot be changed. To avoid issues during the update, all permissions for the Administrators group are ignored by default. This behavior can be changed using the ignored groups attribute.
---

# metabase_collection_graph (Resource)

The graph of permissions between permissions groups and collections.

Metabase exposes a single resource to define all permissions related to collections. This means a single collection graph resource should be defined in the entire Terraform configuration.

The collection graph cannot be created or deleted. Trying to create it will result in an error. It should be imported instead. Trying to delete the resource will succeed with no impact on Metabase (it is a no-op).

Permissions for the Administrators group cannot be changed. To avoid issues during the update, all permissions for the Administrators group are ignored by default. This behavior can be changed using the ignored groups attribute.

## Example Usage

```terraform
resource "metabase_collection" "business_reports" {
  name        = "üìà Business reports"
  color       = "#32a852"
  description = "Contains reports accessible to business stakeholders."
}

resource "metabase_permissions_group" "data_analysts" {
  name = "üßë‚Äçüî¨ Data Analysts"
}

resource "metabase_permissions_group" "business_stakeholders" {
  name = "üëî Business Stakeholders"
}

resource "metabase_collection_graph" "graph" {
  permissions = [
    {
      group      = metabase_permissions_group.data_analysts.id
      collection = metabase_collection.business_reports.id
      permission = "write"
    },
    {
      group      = metabase_permissions_group.business_stakeholders.id
      collection = metabase_collection.business_reports.id
      permission = "read"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `permissions` (Attributes Set) A list of permissions for a given group and collection. A (group, collection) pair should appear only once in the list. (see [below for nested schema](#nestedatt--permissions))

### Optional

- `ignored_groups` (Set of Number) The list of group IDs that should be ignored when reading and updating permissions. By default, this contains the Administrators group (`[2]`).

### Read-Only

- `revision` (Number) The revision number for the graph.

<a id="nestedatt--permissions"></a>
### Nested Schema for `permissions`

Required:

- `collection` (String) The ID of the collection to which the permission applies.
- `group` (Number) The ID of the group to which the permission applies.
- `permission` (String) The level of permission (`read` or `write`).

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# By convention, the revision number of the collection graph should be used, although it does not really matter as it
# will be read during the import anyway.
terraform import metabase_collection_graph.graph 1
```
